
## 소개
텍스트 코드(제어 문자)를 영어 대신 한글로 대체합니다. 뿐만 아니라 한글로된 색상 코드 사용, 이름 윈도우, 말풍선 모드, 텍스트 사운드 등 많은 기능을 추가로 제공합니다.

## 다운로드
RAW : https://github.com/biud436/RGSS3/raw/master/RS_HangulMessageSystem.rb

## 주요 기능
- [말풍선 모드](#말풍선)
- [색상 변경](#색상%20변경)
- [텍스트 속도 변경](#텍스트%20속도%20변경)
- [텍스트 정렬](#텍스트%20정렬자)
- [큰 얼굴 이미지](#큰%20얼굴%20이미지%20&%20스탠딩%20CG)
- [5줄 이상의 멀티 라인 사용](#멀티%20라인)
- [텍스트 사운드](#텍스트%20사운드)
- [폰트 설정 및 유저 커스텀 폰트 설정](#폰트%20설정)
- [노트 태그](#노트%20태그)

## 사용법

캐릭터의 이름을 별도의 창에 따로 표시하는 기능입니다. 이 기능을 사용하려면 다음 텍스트 코드를 호출해야 합니다. 이 텍스트 코드는 특수 문자 <> 안에 있는 텍스트를 창에 표시합니다. 

```\이름<이벤트명>```

텍스트를 기입할 때, 콜론을 텍스트 후미에 붙이면 이름 윈도우가 열릴 때 특별한 정렬 명령을 호출할 수 있습니다. 이름 윈도우를 대화창의 가운데 위나, 오른쪽 위에 정렬하려면 다음과 같이 콜론 문자를 사용하여 정렬이 가능합니다.

```html
\이름<이벤트명:center>
\이름<이벤트명:right>
```

이름 색상을 변경하려면 다음과 같이 색상 변경 명령어를 사용하면 됩니다. 

```html
\이름<\색[빨강]호카게>
```

### 말풍선

말풍선 모드는 대화창을 가운데 아래, 중앙, 위쪽에 표시하는 게 아니라 문장 영역의 크기에 맞춰 말풍선처럼 특정 캐릭터의 위치에 표시하는 기능을 말합니다.

대화창을 말풍선 모드로 전환하려면 ```이벤트의 ID```를 괄호 안에 적어야 합니다. ```[]``` 안에 적힌 숫자를 인자 값이라고 칭하는데요. 인자값 -1은 ```플레이어```로 예약되어있습니다. 0은 이벤트 편집기에 해당하는 ```이 이벤트```입니다. 

```rb
\말풍선[이벤트의 ID]
\말풍선[0]
\말풍선[-1]
```
말풍선 모드를 사용할 때, 말풍선 명령어는 가장 처음에 넣어야 좋습니다. 예를 들면 다음과 같이 온갖 명령어와 같이 사용하는 경우, 가장 처음에 넣어주세요.

```
\말풍선[-1]\이름<\색[빨강]러닝은빛\색[기본색]:right><center>안녕하세요? \속도![2]\색[빨강]러닝은빛\색[기본색]\속도![0]입니다.</center>
```

특정 변수 값을 문장 내에 표시하려면 다음과 같이 해야 합니다. 예를 들어, 인덱스에 1이라고 적으면 ```\변수[1]```과 같고 1번 게임 변수가 문장 내에 표시됩니다.

```rb
\변수[인덱스]
\V[인덱스]
```

다음 명령어를 사용하여 게임 내 화폐 단위를 텍스트로 삽입할 수 있습니다.

```
\골드
```

문장 대기, 빠른 표시, 페이지 스킵 여부를 설정하는 기능은 따로 변경되지 않았습니다.

```python
# 골드 윈도우 표시
\$
# 15 프레임 대기
\.
# 60 프레임 대기
\| 
# 빠른 라인 표시 시작
\<
# 빠른 라인 표시 종료
\>
# 페이지 스킵
\^
```

데이터베이스에서 액터의 이름을 가져오는 기능은 본래 ```\N[인덱스]```이지만 ```\주인공[인덱스]```로도 동일하게 이름을 가져올 수 있습니다. 인덱스는 1번부터 시작합니다.

```
\주인공[인덱스]
```

데이터베이스 상의 Object를 가져올 수 있는 명령어를 모아봤습니다. 인덱스는 1번부터 시작합니다.

```
\아이템[인덱스]
\스킬[인덱스]
\무기구[인덱스]
\방어구[인덱스]
\적[인덱스]
\직업[인덱스]
\상태[인덱스]
```

아이콘과 해당 데이터베이스 오브젝트 명을 같이 그려넣는 기능입니다.

```
\스킬아이콘[번호]
\무기구아이콘[번호]
\방어구아이콘[번호]
\아이템아이콘[번호]
```

예) ```\주인공[1]```은 ```아이템아이콘[1]```을 획득하였습니다. 

파티원의 경우도 마찬가지입니다. 원래 명령어는 ```\P[인덱스]```였지만, ```\파티원[인덱스]```를 사용할 수 있습니다. 인덱스는 1번부터 시작합니다.

```
\파티원[인덱스]
```

```\주인공[1]``` 또는 ```\파티원[1]```이라고 적으면 Eric으로 대체됩니다.


### 색상 변경

한글 메시지 시스템에선 기존 색상 명령어도 한글로 사용할 수 있습니다. 단순 명령어만 한글로 바뀐 것이 아닙니다. 예를 들어, 빨강색으로 바꾸고 싶다면 ```\색[빨강]```이라고 적으면 됩니다.

```
\색[색상명]
```

미리 준비된 색상은 다음과 같습니다.

```
"청록","검은색","파란색","짙은회색","자홍색","회색","녹색","밝은녹색","밝은회색", "밤색","감청색","황록색","주황색","주황색","보라색","빨간색",
"민트색","노란색","기본색"
```

동일한 색상 배열이지만 영어로된 색상도 사용 가능합니다.

```
c_aqua, c_black, c_blue, c_dkgray, c_fuchsia, c_gray, c_green,c_lime, c_ltgray, c_maroon, c_navy, c_olive, c_orange, c_purple, c_red, c_silver, c_teal, c_white, c_yellow, c_normal
```

윈도우 스킨에 없고, 미리 준비되지 않은 색상은 색상테이블.ini에 따로 추가해두시면 추가로 사용 가능하기도 합니다.

예를 들면, ```\색[하늘색]```은 다음과 같이 색상테이블.ini 파일 내에 ```[red, green, blue, alpha]```값, 즉 ```[153, 217, 234, 255]```과 같이 추가로 정의되어있습니다. 

```ini
[색상목록]
기본색0=[255, 255, 255, 255]
기본색1=[32, 160, 214, 255]
기본색2=[255, 120, 76, 255]
기본색3=[102, 204, 64, 255]
기본색4=[153, 204, 255, 255]
기본색5=[204, 192, 255, 255]
기본색6=[255, 255, 160, 255]
기본색7=[128, 128, 128, 255]
기본색8=[192, 192, 192, 255]
기본색9=[32, 128, 204, 255]
기본색10=[255, 56, 16, 255]
기본색11=[0, 160, 16, 255]
기본색12=[62, 154, 222, 255]
기본색13=[160, 152, 255, 255]
기본색14=[255, 204, 32, 255]
기본색15=[0, 0, 0, 255]
기본색16=[132, 170, 255, 255]
기본색17=[255, 255, 64, 255]
기본색18=[255, 32, 32, 255]
기본색19=[32, 32, 64, 255]
기본색20=[224, 128, 64, 255]
기본색21=[240, 192, 64, 255]
기본색22=[64, 128, 192, 255]
기본색23=[64, 192, 240, 255]
기본색24=[128, 255, 128, 255]
기본색25=[192, 128, 128, 255]
기본색26=[128, 128, 255, 255]
기본색27=[255, 128, 255, 255]
기본색28=[0, 160, 64, 255]
기본색29=[0, 224, 96, 255]
기본색30=[160, 96, 224, 255]
기본색31=[192, 128, 255, 255]
하늘색=[153, 217, 234, 255]
연보라색=[200, 191, 231, 255]
```

>다만 이 기능은 유저가 **코드를 임의로 삽입할 수 있다는 큰 단점이 있습니다.** 

_예를 들면,_ 게임 개발자가 색상테이블에 정의된 색상을 사용했을 때, 게임 유저가 이 파일을 편집하면 암호화를 깨고, 파일을 열지 않아도 사용이 가능합니다. 

게임 개발자가 색상테이블 파일에 정의된 ```연보라색```을 사용했다고 가정합니다.

```ini
연보라색=Font.default_name=["궁서체,굴림"];[200, 191, 231, 255]
```

이때, 게임 유저가 연보라색의 색상 배열 부분을 위와 같이 수정하면 연보라색으로 바꾸려 할 때 마다, 임의로 인젝션한 폰트 변경 명령어가 실행될 것입니다.

기본적으로 알만툴은 윈도우 스킨에 있는 색상 테이블로부터 색상을 가져옵니다. 기본색은 색상 테이블에 있는 첫번째 색상을 말합니다. ```\C[0]```을 사용했을 때 나타나는 색상을 말합니다. 

```
\색[기본색]
\색[c_normal]
```

텍스트 테두리의 색상도 동일한 한글 색상 명을 사용하여 변경할 수 있습니다. 

```
\테두리색![색상명]
```

반대로 글자 테두리 묘화(```contents.font.italic```)를 ON/OFF(토글)하는 텍스트 코드도 있습니다. ON일 경우, 테두리가 나타나고, OFF일 경우, 글자의 테두리가 사라집니다. 

```
\테두리!
```

미리 정의되지 않은 색상도 사용이 가능합니다. 예를 들어 웹색상으로 흰색은 16진수로 ```#ffffff```인데요. 이 헥스를 그대로 사용하여 다음과 같이 웹컬러 색상 변환 명령을 사용할 수 있습니다. 예를 들면, 흰색은 ```\#ffffff!```과 같습니다. 

```
\#색상코드!
```

문장의 표시 도중, SE 파일을 함께 재생할 수 있는 기능입니다.

```
\효과음![효과음명]
```

텍스트의 크기를 명시적으로 변경하려면 다음과 같은 명령어를 사용하여 텍스트 크기를 변경할 수 있습니다. 텍스트의 크기는 사용하는 폰트에 따라 미세하게 달라질 수 있습니다. 또한 주의할 점은 자동 개행 기능 사용 여버, 라인의 크기보다 너무 크게 설정한 경우, 텍스트 일부가 다음 라인에 의해 가로로 크게 잘릴 수도 있습니다.

```
\크기![텍스트_크기]
```

### 텍스트 속도 변경

RPG Maker는 문장의 표시 도중에 결정키나 취소키를 누르지 않는 이상, 한 글자를 그린 후 일정 시간을 대기한 후에야 다음 글자를 그립니다.

이때 ```\속도![텍스트의 속도]``` 명령어를 사용하여 다음 글자가 그려질 때 까지의 대기 프레임 값을 조절할 수 있습니다.

변경된 대기 프레임 값은 현재 페이지에만 적용되고, 다음 페이지에선 다시 초기 값으로 초기화 됩니다.

```rb
\속도![텍스트의 속도]
\속도![0] # 최대 속도 
\속도![1] # 기본 출력 속도
\속도![8] # 가장 느림
```

텍스트를 그리는 도중에 그림 텍스트 코드를 만나면, 파일명을 추출하여 그림 파일을 로드한 후, 대화창 안에 해당 그림 파일을 그려넣습니다. 이때, 그림은 텍스트처럼 취급되므로 다음 텍스트는 그림이 그려진 영역 다음에 그려집니다.

```
\그림![그림파일명]
```

글자가 대화창의 가로 길이를 넘어가면 자동으로 줄바꿈을 하는 기능입니다. 자동 개행 기능을 사용하면 각 라인에 적용된 모든 개행 문자가 제거됩니다. 개행 문자는 문장의 표시 창에서 Enter 키를 누를 때 마다 삽입되며, 문장의 표시 창에서는 보이지 않는 특수한 문자(```\r\n```)입니다. 

```
\자동개행!
```

### 텍스트 정렬자

텍스트를 중앙 또는 오른쪽으로 정렬하려면 다음과 같은 태그를 사용하십시오.

```
<CENTER>목둔, 수계 강탄</CENTER>
<RIGHT>화둔, 호화구의 술</RIGHT>
<LEFT>수둔, 수룡탄의 술</LEFT>
```

태그가 새로 추가되었지만 여전히 기존 명령어인 정렬자를 사용할 수도 있습니다. ```0```은 왼쪽, ```1```은 가운데 정렬, ```2```는 오른쪽 정렬입니다.

```
\정렬자[0]수둔, 수룡탄의 술
\정렬자[1]목둔, 수계 강탄
\정렬자[2]화둔, 호화구의 술
```

텍스트를 굵게 또는 기울임 꼴로 설정할 수 있는 태그입니다. 기존 명령어 ```\굵게!```, ```\이탤릭!```도 아직 유효하지만 새로 추가된 태그 사용을 추천합니다.

```
\색[빨강]<B>나루토</B>\색[기본색]
<I>가아라</I>
```

숫자 통화 포맷으로 표시하려면 다음과 같은 텍스트 코드를 사용하십시오.

```
\숫자[500000]
```

### 큰 얼굴 이미지 & 스탠딩 CG

스탠딩 CG나 큰 얼굴 이미지를 사용하려면 ```Graphics/Faces``` 폴더에 해당 이미지를 넣어야 합니다. 이때, 이미지의 이름 앞에 ```큰_```이라는 말머리를 추가해야 큰 얼굴 이미지로 인식합니다.

이때, 얼굴 이미지의 선택 칸의 위치가 0이면 얼굴 이미지가 왼쪽에 표시됩니다.

```
0 1 2 3
4 5 6 7
```

0이 아닌 경우, 오른쪽에 표시됩니다.

### 멀티 라인
문장의 표시를 사용하기 전에 다음과 같이 스크립트를 호출하여 라인을 8줄로 설정합니다.

```rb
RS::LIST["라인"] = 8
```

4줄짜리 문장의 표시 두개를 나란히 배치합니다.

~~~
라인1
라인2
라인3
라인4
~~~

~~~
라인5
라인6
라인7
라인8
~~~

그리고 스크립트 커맨드를 추가하여 다시 4줄 또는 원래 라인으로 설정해줍니다.

```rb
RS::LIST["라인"] = 4
```

### 텍스트 사운드
텍스트가 표시될 때, 텍스트 사운드도 같이 재생하는 기능입니다. 기본적으로는 true로 설정되어있으며 사용을 원치 않는 경우에는 false로 변경을 해주시기 바랍니다.

```rb
  # 텍스트 사운드 설정
  LIST["텍스트 사운드 사용"] = true
  LIST["텍스트 사운드"] = ["Cursor1", "Cursor1"]
  LIST["텍스트 사운드 볼륨"] = [70, 70]
  LIST["텍스트 사운드 피치"] = [100, 90]
  LIST["텍스트 사운드 주기"] = 3  
```

텍스트 사운드는 기본적으로 같은 SE 파일 ```Cursor1```을 재생하도록 설정되어있는데요. 하지만 램덤한 재생도 가능합니다.

```rb
  LIST["텍스트 사운드"] = ["Cursor1", "Cursor2", "Cursor3"]
  LIST["텍스트 사운드 볼륨"] = [70, 70, 70]
  LIST["텍스트 사운드 피치"] = [100, 100, 100]
```

또한 스크립트 명령어를 통해 텍스트 사운드를 중간에 다른 SE 파일로 바꿀 수도 있습니다.

```rb
  LIST["텍스트 사운드"] = ["Other-Cursor1", "Other-Cursor1"]
  LIST["텍스트 사운드 볼륨"] = [70, 70]
  LIST["텍스트 사운드 피치"] = [100, 90]
```

### 폰트 설정
폰트는 스크립트 상단 RS 모듈에서 변경이 가능합니다.

```rb
  # 폰트 리스트 예:) ["나눔고딕, "굴림"]
  # Fonts 폴더에 해당 폰트 파일에 있어야 합니다.
  # 폰트 파일과 글꼴명은 다를 수 있습니다.
  # 여기에 적는 것은 해당 폰트의 실제 글꼴명입니다.
  LIST["폰트명"] = Font.default_name
  
  # 폰트 크기를 변경합니다. 예:) Font.default_size는 기본 폰트 사이즈입니다.
  LIST["폰트크기"] = Font.default_size
```

유저가 폰트를 INI 파일을 통해 바꿀 수 있게 하려면 다음과 같이 하세요. 먼저 폰트.ini 파일을 루트 폴더에 만듭니다.

```ini
[폰트]
폰트명=궁서체
폰트크기=24
텍스트사운드=true
```

그 후, 한글 메시지 시스템 스크립트 밑에 새로운 스크립트를 추가하고, 다음과 같이 적습니다.

```rb
module RS
    LIST["폰트명"] = INI.read_string('폰트', '폰트명', '폰트.ini')
    LIST["폰트크기"] = INI.read_string('폰트', '폰트크기', '폰트.ini').to_i
    LIST["텍스트 사운드 사용"] = INI.read_string('폰트', '텍스트사운드', '폰트.ini') == "true"
end
```

### 노트 태그
대화가 시작되기 전에 다음 노트 태그를 설정하면 메시지 설정을 바꿀 수 있습니다.

```
<대화창 윈도우스킨:Window>
<이름 윈도우스킨:Window>
<대화창 투명도:255>
```

[▲ 맨 위로](#)